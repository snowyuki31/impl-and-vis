(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{8642:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/traveling-salesman",function(){return c(6142)}])},6142:function(a,b,c){"use strict";c.r(b),c.d(b,{Field:function(){return D},Generator:function(){return F},Info:function(){return E},Solver:function(){return G},default:function(){return C}});var d=c(828),e=c(5893),f=c(7294),g=c(93),h=c(1799),i=c(9396),j=c(3109),k=c(6343),l={BF:"Brute Force",DP:"Held-Karp",NN:"Nearest Neighbor",TwoOpt:"NN + 2-opt",ILS:"Iterative Local Search"},m={Small:10,Medium:17,Large:100,Extreme:500},n={Width:2e3,CircleColor:"rgba(255, 255, 255, 0.4)",LineColor:"#C84B31"},o={progress:0,minCost:null,optimal:null,calculationTime:null},p=c(6895),q=c.n(p),r=function(a){var b=a.bgCanvasRef,c=a.resultCanvasRef,d=a.size;return(0,e.jsxs)("div",{className:q().canvas_wrap,children:[(0,e.jsx)("canvas",{ref:b,width:d,height:d,className:q().canvas}),(0,e.jsx)("canvas",{ref:c,width:d,height:d,className:q().canvas})]})},s=r;function t(a){var b=a%n.Width;return[(a-b)/n.Width,b]}var u=function(a,b,c){(0,f.useEffect)(function(){var d=a.current,e=b.current;d&&e&&c({bgContext:d.getContext("2d"),resultContext:e.getContext("2d")})},[])},v=function(a,b,c){(0,f.useEffect)(function(){null!==a&&null!==a.bgContext&&c&&(console.log("len:",c.get_nodes().length),a.bgContext.clearRect(0,0,n.Width,n.Width),c.get_nodes().forEach(function(c){var e=(0,d.Z)(t(c),2),f=e[0],g=e[1];null!==a.bgContext&&(a.bgContext.strokeStyle=n.CircleColor,b.size<=300?(a.bgContext.lineWidth=12,a.bgContext.beginPath(),a.bgContext.arc(f,g,40,0,360,!1)):(a.bgContext.lineWidth=7,a.bgContext.beginPath(),a.bgContext.arc(f,g,25,0,360,!1)),a.bgContext.stroke())}),a.bgContext.save())},[c])},w=function(a){var b=a.hooks,c=b.useGenerator[0],g=c.size,m=c.seed,o=b.useSolver[0].solver,p=(0,d.Z)(b.useInfo,2),q=p[0],r=p[1],w=(0,f.useState)(),x=w[0],y=w[1],z=(0,f.useState)(),A=z[0],B=z[1],C=(0,f.useState)(),D=C[0],E=C[1],F=(0,f.useState)(0),G=F[0],H=F[1],I=(0,f.useState)({bgContext:null,resultContext:null}),J=I[0],K=I[1],L=(0,f.useRef)(null),M=(0,f.useRef)(null);return u(L,M,K),(0,f.useEffect)(function(){var a;B(null),E(null),H(0),null===(a=J.resultContext)|| void 0===a||a.clearRect(0,0,n.Width,n.Width),(0,j.ZP)().then(function(){var a=j.kJ.new(g,m,n.Width);a.build(),y(a)})},[g,m,o]),v(J,c,x),(0,f.useEffect)(function(){if(x&&null!==o){var a,b=performance.now();switch(o){case l.BF:a=x.solve_bf();break;case l.DP:a=x.solve_dp();break;case l.NN:a=x.solve_nn();break;case l.TwoOpt:a=x.two_opt();break;case l.ILS:a=x.iterative_local_search()}B(a),E(x.get_costs());var c=performance.now();r((0,i.Z)((0,h.Z)({},q),{calculationTime:c-b}))}},[o]),(0,k.Z)(function(){if(A&&D&&J.resultContext){if(G<A.length){var a=D[G/c.size];r((0,i.Z)((0,h.Z)({},q),{minCost:a,optimal:null,progress:100*G/A.length})),J.resultContext.clearRect(0,0,n.Width,n.Width),J.resultContext.strokeStyle=n.LineColor,J.resultContext.lineWidth=12,J.resultContext.beginPath();for(var b=G;b<G+c.size;b++){var e,f,g=(0,d.Z)(t(A[b]),2),j=g[0],k=g[1],m=0,p=0;b+1==G+c.size?(m=(e=(0,d.Z)(t(A[G]),2))[0],p=e[1]):(m=(f=(0,d.Z)(t(A[b+1]),2))[0],p=f[1]),J.resultContext.moveTo(j,k),J.resultContext.lineTo(m,p)}J.resultContext.stroke(),H(G+c.size)}else G==A.length&&(o===l.BF||o===l.DP?r((0,i.Z)((0,h.Z)({},q),{optimal:"optimal",progress:100})):r((0,i.Z)((0,h.Z)({},q),{optimal:"heuristic",progress:100})))}},100),(0,e.jsx)(s,{bgCanvasRef:L,resultCanvasRef:M,size:n.Width})},x=c(2532),y=c(3443),z=c(6946),A=c(6420),B=c(1734),C=function(){var a={useGenerator:(0,f.useState)({seed:Math.floor(100*Math.random()),size:m.Large}),useSolver:(0,f.useState)({solver:null}),useInfo:(0,f.useState)(o)};return(0,e.jsx)(g.Z,{pagename:"Traveling Salesman",field:D(a),infoArea:E(a),generator:F(a),solver:G(a)})},D=function(a){var b=(0,e.jsx)(w,{hooks:a});return(0,e.jsx)(z.q,{hooks:a,field:b})},E=function(a){var b=(0,d.Z)(a.useGenerator,2),c=b[0];b[1];var f=(0,d.Z)(a.useInfo,2),g=f[0];f[1];var h=(0,e.jsxs)("div",{children:["n=",c.size]}),i=(0,e.jsxs)("div",{children:["Minimum Cost: ",g.minCost?g.minCost.toFixed(2):"inf",null===g.optimal?"":" ("+g.optimal+")"]}),j=c.size>300&&null===g.calculationTime;return(0,y.Z)({hooks:a,inputInfo:h,outputInfo:i,isWarning:j})},F=function(a){var b=[(0,e.jsx)(A.Z,{value:m.Small,children:"Small"},"small"),(0,e.jsx)(A.Z,{value:m.Medium,children:"Medium"},"medium"),(0,e.jsx)(A.Z,{value:m.Large,children:"Large"},"large"),(0,e.jsx)(A.Z,{value:m.Extreme,children:"Extreme"},"extreme"),];return(0,B.Z)(a,o,b)},G=function(a){var b=(0,d.Z)(a.useGenerator,2),c=b[0];b[1];var f=[(0,e.jsx)(A.Z,{value:l.BF,disabled:c.size>12,children:l.BF},l.BF),(0,e.jsx)(A.Z,{value:l.DP,disabled:c.size>20,children:l.DP},l.DP),(0,e.jsx)(A.Z,{value:l.NN,children:l.NN},l.NN),(0,e.jsx)(A.Z,{value:l.TwoOpt,children:l.TwoOpt},l.TwoOpt),(0,e.jsx)(A.Z,{value:l.ILS,children:l.ILS},l.ILS),];return(0,x.Z)(a,o,f,"vertical")}},6895:function(a){a.exports={canvas_wrap:"style_canvas_wrap__cQjqG",canvas:"style_canvas__uOKal"}}},function(a){a.O(0,[775,129,19,506,774,888,179],function(){var b;return a(a.s=8642)}),_N_E=a.O()}])